<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Haihson&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="学习总结 思考感悟 知识管理">
<meta property="og:type" content="website">
<meta property="og:title" content="Haihson's Blog">
<meta property="og:url" content="http://haihson.github.io/index.html">
<meta property="og:site_name" content="Haihson's Blog">
<meta property="og:description" content="学习总结 思考感悟 知识管理">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Haihson's Blog">
<meta name="twitter:description" content="学习总结 思考感悟 知识管理">
  
    <link rel="alternative" href="/atom.xml" title="Haihson&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="http://o73el5cs1.bkt.clouddn.com/7833658.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://o73el5cs1.bkt.clouddn.com/20160514114829.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Haihson</a></h1>
		</hgroup>

		
		<p class="header-subtitle">mmmmmmm香蕉</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>主菜单</li>
						<li>云标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Haihson" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/BeautifulSoup/" style="font-size: 10px;">BeautifulSoup</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/apache/" style="font-size: 15px;">apache</a> <a href="/tags/cms/" style="font-size: 10px;">cms</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/grep/" style="font-size: 10px;">grep</a> <a href="/tags/html5/" style="font-size: 15px;">html5</a> <a href="/tags/input/" style="font-size: 10px;">input</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/php/" style="font-size: 15px;">php</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">博主很懒，还没留下什么东西......</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Haihson</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://o73el5cs1.bkt.clouddn.com/20160514114829.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Haihson</h1>
			</hgroup>
			
			<p class="header-subtitle">mmmmmmm香蕉</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Haihson" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-MySQL_SQL_Mode" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/20/MySQL_SQL_Mode/" class="article-date">
  	<time datetime="2016-12-20T02:47:20.000Z" itemprop="datePublished">2016-12-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/20/MySQL_SQL_Mode/">MySQL SQL Mode 严格模式问题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="MySQL严格模式下导致的问题"><a href="#MySQL严格模式下导致的问题" class="headerlink" title="MySQL严格模式下导致的问题"></a>MySQL严格模式下导致的问题</h4><p>在本地开发环境跑完项目，是正常OK的；把项目部署到生产环境后，发现项目能正常访问，但是在进行新增操作时，报了数据库表插入时的错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1364 (HY000): Field &apos;数据库字段&apos; doesn&apos;t have a default value INSERT INTO 表</span><br></pre></td></tr></table></figure>
<p>刚开始觉得很奇怪，因为开发环境和生成环境用的MySQL、Apache都是同样的版本，很纳闷…..</p>
<p>这时去查看报错日志，找到报错那个位置的代码，没发现有什么异常，然后再回首来看报出的错，意思是说字段没有默认值，也去搜索了这方面的问题，发现是MySQL数据库配置的严格模式问题，我本地环境的MySQL开启的非严格模式，生产环境开启是严格模式，MySQL模式配置说明 <a href="http://dev.mysql.com/doc/refman/5.7/en/sql-mode.html" target="_blank" rel="external">传送门</a></p>
<p>如何开启、关闭MySQL严格模式，找到MySQL的配置文件路径</p>
<ul>
<li>linux 下 vim /etc/my.cnf</li>
<li>windows 下 安装路径的my.ini/my.cnf</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES 严格模式</span><br><span class="line"></span><br><span class="line">sql_mode=&quot;&quot; 非严格模式</span><br></pre></td></tr></table></figure>
<p>然后重启MySQL服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">For CentOS 7 servers:</span><br><span class="line">systemctl restart mysql</span><br><span class="line"></span><br><span class="line">For CentOS 6 and prior:</span><br><span class="line">/etc/init.d/mysql restart</span><br><span class="line"></span><br><span class="line">For Windows</span><br><span class="line">net stop MySQL   </span><br><span class="line">net start MySQL</span><br></pre></td></tr></table></figure></p>
<p>这样就解决问题了。</p>
<p>No 这样的做法是可以解决这个情况，但不是很好的做法，MySQL严格模式可以使数据更加安全严格，减少了对空数据入库。可以提高代码的质量及对数据的严谨性，所以建议在开发环境就开启严格模式，代码中在进行数据表操作时改默认的写默认，数据库表设计时要默认的写默认。</p>
<p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `mytable` (</span><br><span class="line"> `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line"> `title` varchar(20) NOT NULL,</span><br><span class="line"> `content` text NOT NULL,</span><br><span class="line"> PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure></p>
<p>插入一条记录，title 的值为 NULL</p>
<p>非严格模式下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into table(content) values(&apos;value&apos;);</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from mytable;</span><br><span class="line">+----+------+------------+</span><br><span class="line">| id | title | content    |</span><br><span class="line">+----+------+------------+</span><br><span class="line">|  1 |       | programmer |</span><br><span class="line">+----+-------+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<p>严格模式下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into table(content) values(&apos;value&apos;);</span><br><span class="line">ERROR 1364 (HY000): Field &apos;title&apos; doesn&apos;t have a default value</span><br></pre></td></tr></table></figure></p>
<p>所以我最后的做法是在代码中更改了操作数据库表的SQL写上默认值。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/MySQL/">MySQL</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Linux_MySQL" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/16/Linux_MySQL/" class="article-date">
  	<time datetime="2016-12-16T08:52:29.000Z" itemprop="datePublished">2016-12-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/16/Linux_MySQL/">Linux MySQL mysql.sock 问题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Linux-使用MySQL命令的-mysql-sock-问题"><a href="#Linux-使用MySQL命令的-mysql-sock-问题" class="headerlink" title="Linux 使用MySQL命令的 mysql.sock 问题"></a>Linux 使用MySQL命令的 mysql.sock 问题</h1><p>在服务器上使用mysql命令报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 2002 (HY000): Can&apos;t connect to local MySQL server through socket &apos;/tmp/mysql.sock&apos; (2)</span><br></pre></td></tr></table></figure>
<p>停止、启动MySQL都是正常的，数据库也是在正常运行中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@banana bin]# /etc/init.d/mysqld stop</span><br><span class="line"> Shutting down MySQL....                                    [  OK  ]</span><br><span class="line">[root@banana bin]# /etc/init.d/mysqld start</span><br><span class="line"> Starting MySQL/data/mysql/data</span><br><span class="line"> ..                                                         [  OK  ]</span><br><span class="line"> </span><br><span class="line">[root@banana data]# /etc/init.d/mysqld status</span><br><span class="line"> MySQL running (6557)                                       [  OK  ]</span><br></pre></td></tr></table></figure>
<p>这时想着查看一下数据库进程信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@banana bin]# ps -ef | grep mysql</span><br><span class="line">root      1973     1  0 Nov24 ?        00:00:00 /bin/sh /usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my.cnf --datadir=/data/mysql/data --pid-file=/data/mysql/data/banana.pid</span><br><span class="line">mysql     2815  1973  0 Nov24 ?        01:59:56 /usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf --basedir=/usr/local/mysql --datadir=/data/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=/data_big/mysql/data/banana.err --open-files-limit=8192 --pid-file=/data_big/mysql/data/banana.pid --socket=/data/mysql/data/mysql.sock --port=3306</span><br><span class="line">root      5644  4460  0 14:05 pts/2    00:00:00 grep --color=auto mysql</span><br></pre></td></tr></table></figure></p>
<p>发现 /data/mysql/data/mysql.sock 这里存在一个 mysql.sock 文件，/etc/my.cnf这个配置文件里面 socket 也是填写的这个路径，但运行命令就是提示 /tmp/mysql.sock 不能连接，这时 cd 到 /tmp这个文件夹下面查看，的确没有mysql.sock这个文件，搜索了一下这个文件，了解到mysql.sock的作用是server和client在同一台服务器，并且使用localhost进行链接的时候，就会使用socket来进行连接——仅此而已</p>
<p>网上也有人在讨论这个 mysql.sock 文件丢失的问题， 有说 重启服务器， 重启mysql数据库， mysql.sock 会自动生成， 我试过但都木有用</p>
<p>既然tmp/下面木有这个文件， /data/mysql/data/下面有，直接建立软连接好了，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /data/mysql/data/mysql .sock   /tmp/mysql .sock</span><br></pre></td></tr></table></figure></p>
<p>再次运行MySQL命令，就可以正常使用了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Linux/">Linux</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Linux_grep" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/05/Linux_grep/" class="article-date">
  	<time datetime="2016-12-05T09:19:19.000Z" itemprop="datePublished">2016-12-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/05/Linux_grep/">Linux grep 命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Linux-grep-命令"><a href="#Linux-grep-命令" class="headerlink" title="Linux grep 命令"></a>Linux grep 命令</h1><h4 id="如果想在Linux下查找和过滤文本文件内容，那么就得用grep这个命令。最简单的用法是："><a href="#如果想在Linux下查找和过滤文本文件内容，那么就得用grep这个命令。最简单的用法是：" class="headerlink" title="如果想在Linux下查找和过滤文本文件内容，那么就得用grep这个命令。最简单的用法是："></a>如果想在Linux下查找和过滤文本文件内容，那么就得用grep这个命令。最简单的用法是：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep apple fruitlist.txt</span><br></pre></td></tr></table></figure>
<p>如果想忽略大小写，可以用-i参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -i apple fruitlist.txt</span><br></pre></td></tr></table></figure></p>
<p>如果想搜索目录里所有文件，包括子目录的话，并且在结果中显示行号，可以用以下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -nr apple *</span><br></pre></td></tr></table></figure></p>
<p>grep的语法支持正则表达式，正则表达式有些复杂，以后再讲解。下面是一些有用的参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-A num, --after-context=num: 在结果中同时输出匹配行之后的num行</span><br><span class="line">-B num, --before-context=num: 在结果中同时输出匹配行之前的num行，有时候我们需要显示几行上下文。</span><br><span class="line">-i, --ignore-case: 忽略大小写</span><br><span class="line">-n, --line-number: 显示行号</span><br><span class="line">-R, -r, --recursive: 递归搜索子目录</span><br><span class="line">-v, --invert-match: 输出没有匹配的行</span><br></pre></td></tr></table></figure></p>
<p>我们可以通过管道操作来让grep变得更强大，管道操作就是把前面一条命令的输出作为后面一条命令的输入，从而把很多简单的命令组合起来完成复杂的功能。</p>
<p>例如，如果我们想查找包含apple的行，但又想过滤掉pineapple，可以用下面的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep apple fruitlist.txt | grep -v pineapple</span><br></pre></td></tr></table></figure>
<p>如果我们想把搜索结果保存起来，那么可以把命令的标准输出重定向到文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep apple fruitlist.txt | grep -v pineapple &gt; apples.txt</span><br></pre></td></tr></table></figure></p>
<p>重定向符号&gt;和管道操作符号|的区别是，重定向后面接的是一个文件，它后面不能再接任何文件或命令了；而管道操作后面接的是命令，可以无限地接下去。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/grep/">grep</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Linux/">Linux</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Histroy_Back_JS_Flush" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/13/Histroy_Back_JS_Flush/" class="article-date">
  	<time datetime="2016-10-13T10:19:19.000Z" itemprop="datePublished">2016-10-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/13/Histroy_Back_JS_Flush/">浏览器后退上一级页面中JS执行问题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="在项目中，页面中如果后退-history-back-至上一级页面，上一级页面的JS会执行，结果发现，这里存在一个兼容性的问题，Chrome-Firefox-移动端webview中使用-history-back-或者-history-go-1-都是可以的，但在iphone-ipad-mac中-safari-却不行。"><a href="#在项目中，页面中如果后退-history-back-至上一级页面，上一级页面的JS会执行，结果发现，这里存在一个兼容性的问题，Chrome-Firefox-移动端webview中使用-history-back-或者-history-go-1-都是可以的，但在iphone-ipad-mac中-safari-却不行。" class="headerlink" title="在项目中，页面中如果后退 history.back() 至上一级页面，上一级页面的JS会执行，结果发现，这里存在一个兼容性的问题，Chrome Firefox 移动端webview中使用 history.back() 或者 history.go(-1) 都是可以的，但在iphone ipad mac中 safari 却不行。"></a>在项目中，页面中如果后退 history.back() 至上一级页面，上一级页面的JS会执行，结果发现，这里存在一个兼容性的问题，Chrome Firefox 移动端webview中使用 history.back() 或者 history.go(-1) 都是可以的，但在iphone ipad mac中 safari 却不行。</h5><p>解决办法，用以下进行后退即可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.document.referrer</span><br></pre></td></tr></table></figure></p>
<p>具体写法也可针对性写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (/(iPhone|iPad|iPod)/i.test(navigator.userAgent)) &#123;             </span><br><span class="line">     window.location.href = window.document.referrer;</span><br><span class="line">&#125; else &#123; </span><br><span class="line">	 window.history.go(&quot;-1&quot;); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>document.referrer 文档的相关说明 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/referrer" target="_blank" rel="external">传送门</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html5/">html5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/CSS/">CSS</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Python_BeautifulSoup" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/22/Python_BeautifulSoup/" class="article-date">
  	<time datetime="2016-06-22T07:52:12.000Z" itemprop="datePublished">2016-06-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/22/Python_BeautifulSoup/">Python 爬虫第一弹</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="Python-爬虫初练-—-第一篇"><a href="#Python-爬虫初练-—-第一篇" class="headerlink" title="Python 爬虫初练 — 第一篇"></a>Python 爬虫初练 — 第一篇</h5><p>日前想爬取某些网站的数据，发现使用 Python 会更加方便快捷一些，so 写了一个小示例，用 <a href="http://beautifulsoup.readthedocs.io/zh_CN/latest" target="_blank" rel="external">Beautiful Soup 4.4.0 使用文档</a>  这个库来处理请求来的页面数据，re 库来正则匹配需要的数据，最后把提取的数据存储到数据库。</p>
<p>示例如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf-8</span><br><span class="line">import requests</span><br><span class="line">import MySQLdb, re</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line"></span><br><span class="line">url = &apos;http://www.qccr.com/list_lt/sub_c1_s25_o0_d1/&apos;</span><br><span class="line">user_agent = &apos;Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.110 Safari/537.36&apos;</span><br><span class="line">headers = &#123;&apos;User-Agent&apos;: user_agent&#125;</span><br><span class="line"></span><br><span class="line">print &apos;-----------初始化参数------------&apos;</span><br><span class="line">response = requests.get(url, headers=headers)</span><br><span class="line">content = response.text</span><br><span class="line">soup = BeautifulSoup(content, &apos;html.parser&apos;)</span><br><span class="line">print soup.title.string</span><br><span class="line"></span><br><span class="line">rootHtml = soup.find(id=&quot;newResult&quot;)</span><br><span class="line">htmlCar = rootHtml.find(&quot;div&quot;, &#123;&quot;class&quot;: &quot;thislist&quot;&#125;).ul</span><br><span class="line">pager = rootHtml.find(id=&quot;div_pager&quot;)</span><br><span class="line">currtPage = int(pager.find(&quot;span&quot;, &#123;&quot;class&quot;: &quot;curr&quot;&#125;).string)</span><br><span class="line">pageObj = pager.find(&quot;span&quot;, &#123;&quot;class&quot;: &quot;normalsize&quot;&#125;).string</span><br><span class="line">pageList = re.findall(r&apos;\d+&apos;, pageObj)</span><br><span class="line">pageNum = int(pageList[0]) + 1</span><br><span class="line">allCount = int(pageList[1])</span><br><span class="line"></span><br><span class="line">print &apos;-----------开始爬数据------------&apos;</span><br><span class="line">db = MySQLdb.connect(host=&apos;localhost&apos;, user=&apos;root&apos;, passwd=&apos;password&apos;, db=&apos;qccar&apos;, use_unicode=True, charset=&apos;UTF8&apos;)</span><br><span class="line">cur = db.cursor()</span><br><span class="line">for index in range(currtPage, pageNum):</span><br><span class="line">    url = &apos;http://www.qccr.com/list_lt/sub_c%s_s25_o0_d1/&apos; % index</span><br><span class="line">    response = requests.get(url, headers=headers)</span><br><span class="line">    content = response.text</span><br><span class="line">    soup = BeautifulSoup(content, &apos;html.parser&apos;)</span><br><span class="line">    rootHtml = soup.find(id=&quot;newResult&quot;)</span><br><span class="line">    htmlCar = rootHtml.find(&quot;div&quot;, &#123;&quot;class&quot;: &quot;thislist&quot;&#125;).ul</span><br><span class="line">    print &apos;-----------开始爬取第%d页------------&apos; % index</span><br><span class="line">    itemCount = 0</span><br><span class="line">    for link in htmlCar.find_all(&apos;li&apos;):</span><br><span class="line">        gid = link[&apos;gid&apos;]</span><br><span class="line">        name = link.a.find(&quot;p&quot;, &#123;&quot;class&quot;: &quot;name&quot;&#125;).string</span><br><span class="line">        iconUrl = link.a.img[&apos;data-original&apos;]</span><br><span class="line">        price = link.a.find(&quot;p&quot;, &#123;&quot;class&quot;: &quot;price&quot;&#125;).span</span><br><span class="line">        priceType = price.find(&quot;b&quot;, &#123;&quot;class&quot;: &quot;pmoney&quot;&#125;).string</span><br><span class="line">        priceNum = price.contents[1]</span><br><span class="line">        other = link.a.find(&quot;p&quot;, &#123;&quot;class&quot;: &quot;other&quot;&#125;)</span><br><span class="line">        saleNum = other.find(&quot;span&quot;, &#123;&quot;class&quot;: &quot;saleNum&quot;&#125;).string</span><br><span class="line">        appraise = other.find(&quot;span&quot;, &#123;&quot;class&quot;: &quot;appraise&quot;&#125;).string</span><br><span class="line">        itemCount += 1</span><br><span class="line">        print &apos;第%d页 第%d条获取完毕......&apos; % (index, itemCount)</span><br><span class="line">        cur.execute(</span><br><span class="line">            &quot;INSERT INTO sp_tyre (gid, title, icon_url, price_type, price_num, sale_num, appraise) VALUES (%s,%s,%s,%s,%s,%s,%s)&quot;,</span><br><span class="line">            (gid, name.encode(&quot;utf8&quot;), iconUrl, priceType.encode(&quot;utf8&quot;), priceNum, saleNum, appraise))</span><br><span class="line">        # print &quot;%s           %s %s   %s  %s&quot; % (name, priceType, priceNum, saleNum, appraise)</span><br><span class="line">    print &apos;-----------第%d页爬取完毕------------&apos; % index</span><br><span class="line">db.commit()</span><br><span class="line">cur.close()</span><br><span class="line">db.close()</span><br><span class="line">print &apos;数据已全部爬取完毕：总共 %d 页，%d 条&apos; % (pageNum - 1, allCount)</span><br></pre></td></tr></table></figure></p>
<p>数据库SQL：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS `sp_tyre`;</span><br><span class="line">/*!40101 SET @saved_cs_client     = @@character_set_client */;</span><br><span class="line">/*!40101 SET character_set_client = utf8 */;</span><br><span class="line">CREATE TABLE `sp_tyre` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &apos;Id&apos;,</span><br><span class="line">  `gid` int(11) DEFAULT NULL COMMENT &apos;ID标识&apos;,</span><br><span class="line">  `title` varchar(255) DEFAULT NULL COMMENT &apos;名字&apos;,</span><br><span class="line">  `icon_url` varchar(255) DEFAULT NULL COMMENT &apos;商品图片URL&apos;,</span><br><span class="line">  `price_type` varchar(10) DEFAULT NULL COMMENT &apos;货币类型&apos;,</span><br><span class="line">  `price_num` decimal(10,2) DEFAULT NULL,&apos;价格&apos;</span><br><span class="line">  `sale_num` int(11) DEFAULT NULL COMMENT &apos;已售数&apos;,</span><br><span class="line">  `appraise` int(11) DEFAULT NULL COMMENT &apos;评价数&apos;,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=759 DEFAULT CHARSET=utf8;</span><br><span class="line">/*!40101 SET character_set_client = @saved_cs_client */;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BeautifulSoup/">BeautifulSoup</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-css_input" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/30/css_input/" class="article-date">
  	<time datetime="2016-05-30T09:19:19.000Z" itemprop="datePublished">2016-05-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/30/css_input/">css_input 光标显示问题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="在项目中，页面中的input框，在手机端输入时-触发焦点时光标的高度和input框的高度是一样的，输入内容后光标高度从input顶部到文字底部，然后删掉输入的内容，光标高度还是从input顶部到文字底部。"><a href="#在项目中，页面中的input框，在手机端输入时-触发焦点时光标的高度和input框的高度是一样的，输入内容后光标高度从input顶部到文字底部，然后删掉输入的内容，光标高度还是从input顶部到文字底部。" class="headerlink" title="在项目中，页面中的input框，在手机端输入时 触发焦点时光标的高度和input框的高度是一样的，输入内容后光标高度从input顶部到文字底部，然后删掉输入的内容，光标高度还是从input顶部到文字底部。"></a>在项目中，页面中的input框，在手机端输入时 触发焦点时光标的高度和input框的高度是一样的，输入内容后光标高度从input顶部到文字底部，然后删掉输入的内容，光标高度还是从input顶部到文字底部。</h5><p>input内容为空时：</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160530165328.png" alt="input内容为空时"></p>
<p>输入内容后：</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160530165312.png" alt="input内容为空时"></p>
<p>input部分的 CSS 所写如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">border: none;</span><br><span class="line">font-size: 1.4rem;</span><br><span class="line">height: 2.8rem;</span><br><span class="line">line-height: 2.8rem;</span><br><span class="line">width: 100%;</span><br><span class="line">background: rgba(255, 255, 255, 1);</span><br><span class="line">border-radius: 0.4rem;</span><br><span class="line">text-indent: 2.8rem;</span><br></pre></td></tr></table></figure></p>
<p>解决办法：<br>是由于没有设置padding 以及 font-size和height ling-height 值设置的问题，调整 input 部分的 CSS 写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">border: none;</span><br><span class="line">font-size: 1.4rem;</span><br><span class="line">height: 1.4rem;</span><br><span class="line">line-height: 1.4rem;</span><br><span class="line">padding: 0.7rem 0;</span><br><span class="line">width: 100%;</span><br><span class="line">background: rgba(255, 255, 255, 1);</span><br><span class="line">border-radius: 0.4rem;</span><br><span class="line">text-indent: 2.8rem;</span><br></pre></td></tr></table></figure>
<p>font-size 和 height line-height 值设置一样，剩余的高度用 padding 去撑开：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">修改前</span><br><span class="line">font-size: 1.4rem;</span><br><span class="line">height: 2.8rem;</span><br><span class="line">line-height: 2.8rem;</span><br><span class="line"></span><br><span class="line">修改后</span><br><span class="line">font-size: 1.4rem;</span><br><span class="line">height: 1.4rem;</span><br><span class="line">line-height: 1.4rem;</span><br><span class="line">padding: 0.7rem 0;</span><br></pre></td></tr></table></figure>
<p>另外在不同的浏览器上 input placeholder 居中可能不一致，可通过设置 line-height 来达到：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">line-height: normal;</span><br></pre></td></tr></table></figure>
<p>解决后的效果：</p>
<p>input内容为空时：</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160530170559.png" alt="input内容为空时"></p>
<p>输入内容后：</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160530170547.png" alt="input内容为空时"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html5/">html5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/input/">input</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/CSS/">CSS</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Apache_php_cms" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/19/Apache_php_cms/" class="article-date">
  	<time datetime="2016-05-19T03:50:19.000Z" itemprop="datePublished">2016-05-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/19/Apache_php_cms/">Apache_PHP_CMS项目运行问题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="在运行CMS项目的时候，配置的模块访问不了，报404错误，只有首页可以正常访问，查看了项目所有配置，都没有发现问题。经过一番折腾-汗，差不多两天…-，PS：刚开始接触PHP项目，一直以为可能是项目本身的问题，一直在查代码，最后发现最有可能出问题的就是-htaccess-这个文件可能没有被服务器加载，这里要特别感谢一位国外友人回复的邮件给了我提示"><a href="#在运行CMS项目的时候，配置的模块访问不了，报404错误，只有首页可以正常访问，查看了项目所有配置，都没有发现问题。经过一番折腾-汗，差不多两天…-，PS：刚开始接触PHP项目，一直以为可能是项目本身的问题，一直在查代码，最后发现最有可能出问题的就是-htaccess-这个文件可能没有被服务器加载，这里要特别感谢一位国外友人回复的邮件给了我提示" class="headerlink" title="在运行CMS项目的时候，配置的模块访问不了，报404错误，只有首页可以正常访问，查看了项目所有配置，都没有发现问题。经过一番折腾(汗，差不多两天…)，PS：刚开始接触PHP项目，一直以为可能是项目本身的问题，一直在查代码，最后发现最有可能出问题的就是 .htaccess 这个文件可能没有被服务器加载，这里要特别感谢一位国外友人回复的邮件给了我提示"></a>在运行CMS项目的时候，配置的模块访问不了，报404错误，只有首页可以正常访问，查看了项目所有配置，都没有发现问题。经过一番折腾(汗，差不多两天…)，PS：刚开始接触PHP项目，一直以为可能是项目本身的问题，一直在查代码，最后发现最有可能出问题的就是 .htaccess 这个文件可能没有被服务器加载，这里要特别感谢一位国外友人回复的邮件给了我提示</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hello</span><br><span class="line">Please check if you have in merger/ a file called .htaccess It handles the link rewriting.</span><br><span class="line">If you have it your server might not load it, or you might not have mod_rewrite enabled.</span><br></pre></td></tr></table></figure>
<p>所以搜索了下 Apahce php 关于这个文件的相关问题，果然有收获</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160519111439.png" alt=".htaccess problem"></p>
<p>找到这个问题描述的情况和我出现的问题有很大可能就是这个原因</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160519111544.png" alt=".htaccess problem"></p>
<p>根据以上描述，找到 Apache 模块配置的文档 <a href="http://httpd.apache.org/docs/2.4/mod/core.html#allowoverride" target="_blank" rel="external">传送门</a> </p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160519111630.png" alt=".htaccess Answers"></p>
<p>应该是要在 Apache 的配置文件 httpd.conf 文件中 配置 AllowOverride<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;Directory /&gt;</span><br><span class="line">    AllowOverride All    此处将默认的 none 改为 All</span><br><span class="line">    Require all denied</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">AllowOverride All        此处将默认的 none 改为 All</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&lt;Directory &quot;$&#123;SRVROOT&#125;/cgi-bin&quot;&gt;</span><br><span class="line">    AllowOverride All    此处将默认的 none 改为 All</span><br><span class="line">    Options All          此处将默认的 none 改为 All</span><br><span class="line">    Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后重启服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpd -k restart</span><br></pre></td></tr></table></figure></p>
<h5 id="解决以上问题后，再运行php项目的时候，发现之前正常的图片相关的功能不能正常使用，上传出错，图片链接也访问不了，查看error-log日志，错误："><a href="#解决以上问题后，再运行php项目的时候，发现之前正常的图片相关的功能不能正常使用，上传出错，图片链接也访问不了，查看error-log日志，错误：" class="headerlink" title="解决以上问题后，再运行php项目的时候，发现之前正常的图片相关的功能不能正常使用，上传出错，图片链接也访问不了，查看error.log日志，错误："></a>解决以上问题后，再运行php项目的时候，发现之前正常的图片相关的功能不能正常使用，上传出错，图片链接也访问不了，查看error.log日志，错误：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Invalid command &apos;Order&apos;, perhaps misspelled or defined by a module not included in the server configuration</span><br></pre></td></tr></table></figure>
<p>搜索了下这个错误，找到出现同样问题的结果：<br><img src="http://o73el5cs1.bkt.clouddn.com/20160519111331.png" alt="error log"></p>
<p>解决如下，原来是需要加载一个模块<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LoadModule access_compat_module modules/mod_access_compat.so  去掉前面的#号</span><br></pre></td></tr></table></figure></p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160519111406.png" alt="Invalid command &#39;Order&#39; Answers"></p>
<p>然后重启服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpd -k restart</span><br></pre></td></tr></table></figure></p>
<p>ok 解决了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apache/">apache</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cms/">cms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/PHP/">PHP</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Apahce+php" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/12/Apahce+php/" class="article-date">
  	<time datetime="2016-05-12T15:28:49.000Z" itemprop="datePublished">2016-05-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/12/Apahce+php/">windows Apache+PHP环境搭建</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近下了一个PHP做的项目，需要跑起来研究研究，所以就捣腾起了，刚好记录下过程，方便后续健忘时有需要查阅，也可能对今后有需要的伙伴一个借鉴，好了，废话不多说了，直接上过程。</p>
<p>首先准备好待安装的文件:</p>
<ul>
<li><a href="http://www.apachehaus.com/cgi-bin/download.plx" target="_blank" rel="external">Apache2.4.20</a> </li>
<li><a href="http://windows.php.net/download/" target="_blank" rel="external">PHP5.6.21</a></li>
</ul>
<p>这是我所选择的版本 httpd-2.4.20-x64 、php-5.6.21-Win32-VC11-x64  windwos64位，当然你也可根据自己需要下载对应的版本；</p>
<h4 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h4><p><img src="http://o73el5cs1.bkt.clouddn.com/20160513095738.png" alt="Apache"><br><img src="http://o73el5cs1.bkt.clouddn.com/20160513095802.png" alt="Apache"></p>
<h4 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h4><p>下载的 Thread Safe 线程安全的</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160513100502.png" alt="Apache"></p>
<p>到这里，我们先定义下下载下来的安装文件存放路径，以及安装的路径，以下为示例：</p>
<ul>
<li>F:/tmp_file 这个为安装文件的存放目录；</li>
<li>F:/apache24 这个为 Apache2.4.20 所安装的目录；</li>
<li>F:/php5.6.21 这个为 php5.6.21 所安装的目录；</li>
</ul>
<p>现在，如果已全部下载完成，则会得到这两个文件 httpd-2.4.20-x64-vc14-r2.zip 、 php-5.6.21-Win32-VC11-x64.zip</p>
<h3 id="Apahce安装"><a href="#Apahce安装" class="headerlink" title="Apahce安装"></a>Apahce安装</h3><h5 id="解压-httpd-2-4-20-x64-vc14-r2-zip-到-F-apache24"><a href="#解压-httpd-2-4-20-x64-vc14-r2-zip-到-F-apache24" class="headerlink" title="解压 httpd-2.4.20-x64-vc14-r2.zip 到 F:/apache24"></a>解压 httpd-2.4.20-x64-vc14-r2.zip 到 F:/apache24</h5><p>解压完成，然后打开 命令提示符 窗口(注意如果是win8系统，则要以管理员的权限来打开，快捷键为 windows键+x 然后按 a)，切换到 F:/apache24/bin 目录，输入命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpd -k install</span><br></pre></td></tr></table></figure></p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160513101845.png" alt="cmd操作"></p>
<p>此步骤是安装 Apache 服务，这个可在系统服务中查看，新增加了一个名为 Apahce24 的服务，接下来打开 F:/apache24/conf/httpd.conf 这个配置文件，找到如下代码位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Define SRVROOT &quot;/Apache24&quot; </span><br><span class="line">ServerRoot &quot;$&#123;SRVROOT&#125;&quot;</span><br></pre></td></tr></table></figure>
<p>把这个 “/Apache24” 更改为你安装 Apache 的目录 “F:/Apache24” </p>
<p>默认的端口为80，这里我使用默认端口，如需更改，直接把80换成别的端口号，如8080<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Listen 80</span><br></pre></td></tr></table></figure></p>
<p>好，到这里为止，Apache的配置基本完毕，看下效果，启动Apache，输入命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpd -k start</span><br></pre></td></tr></table></figure></p>
<p>然后在浏览器中输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost</span><br></pre></td></tr></table></figure></p>
<p>即可看见 Apache 的欢迎页面。</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160513102156.png" alt="Apache欢迎"></p>
<h3 id="PHP安装"><a href="#PHP安装" class="headerlink" title="PHP安装"></a>PHP安装</h3><h5 id="解压-php-5-6-21-Win32-VC11-x64-zip-到-F-php5-6-21"><a href="#解压-php-5-6-21-Win32-VC11-x64-zip-到-F-php5-6-21" class="headerlink" title="解压 php-5.6.21-Win32-VC11-x64.zip 到 F:/php5.6.21"></a>解压 php-5.6.21-Win32-VC11-x64.zip 到 F:/php5.6.21</h5><p>解压完成，在目录下有一个 php.ini-production 文件，将其重命名为 php.ini 并打开<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">; extension_dir = &quot;./&quot;</span><br></pre></td></tr></table></figure></p>
<p>修改为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">extension_dir = &quot;F:/php5.6.21/ext&quot;</span><br></pre></td></tr></table></figure></p>
<p>去掉了前面的分号，来配置支持数据库，socket等<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">;extension=php_bz2.dll</span><br><span class="line">extension=php_curl.dll</span><br><span class="line">;extension=php_fileinfo.dll</span><br><span class="line">extension=php_gd2.dll</span><br><span class="line">;extension=php_gettext.dll</span><br><span class="line">;extension=php_gmp.dll</span><br><span class="line">;extension=php_intl.dll</span><br><span class="line">extension=php_imap.dll</span><br><span class="line">;extension=php_interbase.dll</span><br><span class="line">;extension=php_ldap.dll</span><br><span class="line">extension=php_mbstring.dll</span><br><span class="line">;extension=php_exif.dll      ; Must be after mbstring as it depends on it</span><br><span class="line">extension=php_mysql.dll</span><br><span class="line">extension=php_mysqli.dll</span><br><span class="line">;extension=php_oci8_12c.dll  ; Use with Oracle Database 12c Instant Client</span><br><span class="line">;extension=php_openssl.dll</span><br><span class="line">;extension=php_pdo_firebird.dll</span><br><span class="line">extension=php_pdo_mysql.dll</span><br><span class="line">;extension=php_pdo_oci.dll</span><br><span class="line">;extension=php_pdo_odbc.dll</span><br><span class="line">;extension=php_pdo_pgsql.dll</span><br><span class="line">;extension=php_pdo_sqlite.dll</span><br><span class="line">;extension=php_pgsql.dll</span><br><span class="line">;extension=php_shmop.dll</span><br><span class="line"></span><br><span class="line">; The MIBS data available in the PHP distribution must be installed. </span><br><span class="line">; See http://www.php.net/manual/en/snmp.installation.php </span><br><span class="line">extension=php_snmp.dll</span><br><span class="line"></span><br><span class="line">extension=php_soap.dll</span><br><span class="line">extension=php_sockets.dll</span><br><span class="line">;extension=php_sqlite3.dll</span><br><span class="line">;extension=php_sybase_ct.dll</span><br><span class="line">;extension=php_tidy.dll</span><br><span class="line">;extension=php_xmlrpc.dll</span><br><span class="line">;extension=php_xsl.dll</span><br></pre></td></tr></table></figure></p>
<p>然后再次打开 F:/apache24/conf/httpd.conf 这个配置文件，修改首页文件类型支持</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule dir_module&gt;</span><br><span class="line">    DirectoryIndex index.html index.htm index.php</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<p>接下来向httpd.conf中写入PHP支持模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 如下为PHP环境添加模块</span><br><span class="line">LoadModule php5_module &quot;F:/php5.6.21/php5apache2_4.dll&quot;</span><br><span class="line">PHPIniDir &quot;F:/php5.6.21/php.ini&quot;</span><br><span class="line"></span><br><span class="line"># 添加PHP支持</span><br><span class="line">AddType application/x-httpd-php .php</span><br></pre></td></tr></table></figure>
<p>接下来，来验证PHP是否安装完毕，在命令行输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpd -k restart</span><br></pre></td></tr></table></figure>
<p>重新启动服务。在 F:\Apache24\htdocs (这个为 Apache 默认的项目存放路径，如需更改，可在 httpd.conf 中更改 DocumentRoot 指向的路径，然后重启 Apache 即可生效) 路径下新建一个文件phpinfo.php，内容添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php phpinfo();?&gt;</span><br></pre></td></tr></table></figure>
<p>然后在浏览器输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost/phpinfo.php</span><br></pre></td></tr></table></figure></p>
<p>显示为PHP的版本的详情信息，则表示PHP环境安装成功。</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160513102434.png" alt="php信息"></p>
<p>至此，Apache+php的基本配置已完毕。</p>
<p>后续加入PHP项目，这里可能会遇到一个坑，就在是服务启动正常，但是在访问PHP项目的时候会报错，导致部分功能不能正常使用，其他的访问正常</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PHP Parse error:  syntax error, unexpected end of file xxxx文件</span><br></pre></td></tr></table></figure>
<p>查看报错位置的文件，也发现完全没有问题，这样捣腾来回一两小时过去了，最后搜索到有人遇到了一样的这个问题</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160513150504.png" alt="php错误信息"></p>
<p>有大神留有答案</p>
<p><img src="http://o73el5cs1.bkt.clouddn.com/20160513150530.png" alt="php错误信息"></p>
<p>就是 short_open_tag 这个配置，这个在 php.ini 文件中默认为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">short_open_tag = Off</span><br></pre></td></tr></table></figure>
<p>将其更改为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">short_open_tag = On</span><br></pre></td></tr></table></figure>
<p>问题解决， O MY GOD …. 就因为这个。然后去PHP官网了解了这个配置指令</p>
<p><a href="http://php.net/manual/zh/ini.core.php#ini.short-open-tag" target="_blank" rel="external">官网地址</a> 更详细的可去官网自行查阅</p>
<p>short_open_tag boolean<br>决定是否允许使用 PHP 代码开始标志的缩写形式（&lt;? ?&gt;）。如果要和 XML 结合使用 PHP，可以禁用此选项以便于嵌入使用 &lt;?xml ?&gt;。否则还可以通过 PHP 来输出，例如：&lt;?php echo ‘&lt;?xml version=”1.0”‘; ?&gt;。如果禁用了，必须使用 PHP 代码开始标志的完整形式（&lt;?php ?&gt;）。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apache/">apache</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/PHP/">PHP</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/22/hello-world/" class="article-date">
  	<time datetime="2016-04-22T02:30:37.796Z" itemprop="datePublished">2016-04-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/22/hello-world/">Hello World</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Haihson
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a>
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<!-- cnzz Analytics -->
<script src="https://s11.cnzz.com/z_stat.php?id=1260140011&web_id=1260140011" language="JavaScript"></script>
<!-- End cnzz Analytics -->




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>